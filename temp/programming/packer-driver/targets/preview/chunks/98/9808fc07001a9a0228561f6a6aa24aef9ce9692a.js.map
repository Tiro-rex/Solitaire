{"version":3,"sources":["file:///D:/GAMIXLABS/Solitaire/assets/Script/Pile.ts"],"names":["_decorator","Component","Vec2","Collider2D","PhysicsSystem2D","Contact2DType","ccclass","property","Pile","offSet","cardR","start","instance","enable","coll","node","getComponent","on","BEGIN_CONTACT","onBeginContact","init","array","len","count","console","log","i","addChild","children","active","self","other","tag","window","moveCard","newPos","getPosition","delay","milliseconds","Promise","resolve","setTimeout"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Prefab, instantiate, EventMouse, Touch, Vec2, Vec3, Button, Collider2D, PhysicsSystem2D, Contact2DType } from 'cc';\nimport { Card } from './Card';\nimport { CARDS_ARRAY } from './GameConstant';\nimport { GameManager } from './GameManager';\nimport { GameScreen } from './GameScreen';\nimport ReaveldCard from './ReaveldCard';\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('Pile')\nexport class Pile extends Component {\n\n    offSet = new Vec2();\n\n    public cardR: ReaveldCard;\n\n    start() {\n        PhysicsSystem2D.instance.enable = true;\n        let coll = this.node.getComponent(Collider2D);\n        coll.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n        // this.cardR.getComponent(ReaveldCard)\n    }\n\n    init(array, len, count) {\n        console.log(array, len, count);\n        for (let i = 0; i < len; i++) {\n            //   let card1 = array.splice(0, 1);\n            this.node.addChild(array[count - 1 + i]);\n\n        }\n        this.node.children[len - 1].active = false;\n    }\n    onBeginContact(self: Collider2D, other: Collider2D) {\n\n        if (self.tag == 1 && window.moveCard) {\n            let newPos = self.node.getPosition();\n            // console.log(\"Postion collider\", newPos);\n            //other.node.setPosition(newPos);\n            //other.node.setSiblingIndex(1);\n            console.log(\"stack-->\", self.tag);\n        }\n        if (self.tag == 2 && window.moveCard) {\n            console.log(\"stack-->\", self.tag);\n        }\n        if (self.tag == 3 && window.moveCard) {\n            console.log(\"stack-->\", self.tag);\n        }\n        if (self.tag == 4 && window.moveCard) {\n            console.log(\"stack-->\", self.tag);\n        }\n        if (self.tag == 5 && window.moveCard) {\n            console.log(\"stack-->\", self.tag);\n        }\n        if (self.tag == 6 && window.moveCard) {\n            console.log(\"stack-->\", self.tag);\n        }\n        if (self.tag == 7 && window.moveCard) {\n            console.log(\"stack-->\", self.tag);\n        }\n    }\n\n\n    delay(milliseconds: number, count): Promise<number> {\n        return new Promise<number>(resolve => {\n            setTimeout(() => {\n                resolve(count);\n            }, milliseconds);\n        });\n    }\n}"]}